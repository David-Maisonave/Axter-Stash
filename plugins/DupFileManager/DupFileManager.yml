name: DupFileManager
description: Manages duplicate files.
version: 0.1.0
url: https://github.com/David-Maisonave/Axter-Stash/tree/main/plugins/DupFileManager
settings:
  dupFileTag:
    displayName: Duplicate File Tag Name
    description: (Default = DuplicateMarkForDeletion) Tag used to tag duplicates with lower resolution, duration, and file name length.
    type: STRING
  dupWhiteListTag:
    displayName: Duplicate Whitelist Tag Name
    description: If populated, a tag name used to tag duplicates in the whitelist. E.g. DuplicateWhitelistFile
    type: STRING
  mergeDupFilename:
    displayName: Merge Duplicate Tags
    description: Before deletion, merge metadata from duplicate. E.g. Tag names, performers, studios, title, galleries, rating, details, etc... 
    type: BOOLEAN
  permanentlyDelete:
    displayName: Permanent Delete
    description: (Default=false) Enable to permanently delete files, instead of moving files to trash can.
    type: BOOLEAN
  whitelistDelDupInSameFolder:
    displayName: Whitelist Delete In Same Folder
    description: (Default=false) Allow whitelist deletion of duplicates within the same whitelist folder.
    type: BOOLEAN
  zcleanAfterDel:
    displayName: Run Clean After Delete
    description: After running a 'Delete Duplicates' task, run Clean, Clean-Generated, and Optimize-Database.
    type: BOOLEAN
  zwhitelist:
    displayName: White List
    description: A comma seperated list of paths NOT to be deleted. E.g. C:\Favorite\,E:\MustKeep\
    type: STRING
  zxgraylist:
    displayName: Gray List
    description: List of preferential paths to determine which duplicate should be the primary. E.g. C:\2nd_Favorite\,H:\ShouldKeep\
    type: STRING
  zyblacklist:
    displayName: Black List
    description: List of LEAST preferential paths to determine primary candidates for deletion. E.g. C:\Downloads\,F:\DeleteMeFirst\
    type: STRING
  zymaxDupToProcess:
    displayName: Max Dup Process
    description: Maximum number of duplicates to process. If 0, infinity
    type: NUMBER
  zzdebugTracing:
    displayName: Debug Tracing
    description: (Default=false) [***For Advanced Users***] Enable debug tracing. When enabled, additional tracing logging is added to Stash\plugins\DupFileManager\DupFileManager.log
    type: BOOLEAN
exec:
  - python
  - "{pluginDir}/DupFileManager.py"
interface: raw
tasks:
  - name: Tag Duplicate Filename
    description: Set tag DuplicateMarkForDeletion to the duplicate with lower resolution, duration, file name length, and/or black list path.
    defaultArgs:
      mode: merge_dup_filename_task
  - name: Delete Duplicates
    description: Delete duplicate files
    defaultArgs:
      mode: delete_duplicates
